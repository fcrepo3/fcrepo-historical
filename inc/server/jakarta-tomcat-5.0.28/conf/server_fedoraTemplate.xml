<Server port="#2" shutdown="SHUTDOWN">
  <!-- Global JNDI resources -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users -->
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
       description="User database that can be updated and saved">
    </Resource>
    <ResourceParams name="UserDatabase">
      <parameter>
        <name>factory</name>
        <value>org.apache.catalina.users.MemoryUserDatabaseFactory</value>
      </parameter>
      <parameter>
        <name>pathname</name>
        <value>conf/tomcat-users.xml</value>
      </parameter>
    </ResourceParams>
  </GlobalNamingResources>
  
  <Service name="Fedora-Server">
	<!-- enableLookups="true" supports client dns/fqdn in xacml authz policies -->
	<!-- set independently in the 2 Connector elements below -->
	<!-- not needed for ip decisions in xacml authz policies -->
    <Connector port="#1"
               enableLookups="true" redirectPort="#3" acceptCount="15"
               maxThreads="300" maxSpareThreads="75" minSpareThreads="6"
               debug="0"
               maxPostSize="0" />
	<!-- comment out next connector (with port="#3") to disable https/ssl -->
    <Connector className="org.apache.coyote.tomcat5.CoyoteConnector"
               port="#3" minProcessors="5" maxProcessors="75"
               enableLookups="true"
               acceptCount="10" debug="4" scheme="https" secure="true"
               useURIValidationHack="false">
      <Factory className="org.apache.coyote.tomcat5.CoyoteServerSocketFactory"
               clientAuth="false" protocol="TLS" />
    </Connector>
    <Engine name="Catalina" defaultHost="localhost" debug="0">
      <Logger className="org.apache.catalina.logger.FileLogger" />
      <!-- Realm className="org.apache.catalina.realm.UserDatabaseRealm" / -->

<Realm className="org.apache.catalina.realm.JAASRealm" 
	appName="fedora" 
	userClassNames="org.apache.catalina.realm.IdPrincipal" 
	roleClassNames="org.apache.catalina.realm.RolePrincipal" /> 
      
      <Host name="localhost" appBase="webapps" debug="0"
            unpackWARS="true" autoDeploy="true">
          <Valve className="org.apache.catalina.valves.AccessLogValve"
                 directory="logs"  prefix="localhost_access_log." suffix=".txt"
                 pattern="common"/>
      </Host>
    </Engine>
  </Service>
</Server>
