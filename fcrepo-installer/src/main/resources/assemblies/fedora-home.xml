<assembly>
  <id>fedora-home</id>
  <includeBaseDirectory>false</includeBaseDirectory>
  <formats>
    <format>zip</format>
  </formats>

  <fileSets>

    <!-- Top-level entries -->
    <fileSet>
      <directory>../resources/doc/license</directory>
      <outputDirectory>/docs/license</outputDirectory>
    </fileSet>

    <fileSet>
      <directory>../resources/doc/userdocs</directory>
      <outputDirectory>/docs/userdocs</outputDirectory>
    </fileSet>

    <fileSet>
      <directory>../target/site/apidocs</directory>
      <outputDirectory>/docs/javadocs</outputDirectory>
    </fileSet>

    <fileSet>
      <directory>../resources/inc</directory>
      <outputDirectory>/server</outputDirectory>
      <includes>
        <include>truststore</include>
      </includes>
    </fileSet>

    <fileSet>
      <directory>../resources/wsdl</directory>
      <outputDirectory>/server/management</outputDirectory>
      <includes>
        <include>Fedora-API-M.wsdl</include>
        <include>Fedora-API-M-LITE.wsdl</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../resources/wsdl</directory>
      <outputDirectory>/server/access</outputDirectory>
      <includes>
        <include>Fedora-API-A.wsdl</include>
        <include>Fedora-API-A-LITE.wsdl</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../resources/wsdl</directory>
      <outputDirectory>/server/xsd</outputDirectory>
      <includes>
        <include>*.xsd</include>
      </includes>
    </fileSet>  

    <!-- Server entries -->
    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xsl/access</directory>
      <outputDirectory>/server/access</outputDirectory>
      <includes>
        <include>*.xslt</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/scripts/bat/server</directory>
      <outputDirectory>/server/bin</outputDirectory>
    </fileSet>  
    <fileSet>
      <directory>../fcrepo-server/src/main/resources/scripts/sh/server</directory>
      <outputDirectory>/server/bin</outputDirectory>
      <fileMode>0755</fileMode>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/fcfg/server</directory>
      <outputDirectory>/server/config</outputDirectory>
      <includes>
        <include>fedora-users.xml</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xsl/management</directory>
      <outputDirectory>/server/management</outputDirectory>
      <includes>
        <include>*.xslt</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/schematron</directory>
      <outputDirectory>/server/schematron</outputDirectory>
      <includes>
        <include>*.xml</include>
        <include>*.xslt</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xsd</directory>
      <outputDirectory>/server/xsd</outputDirectory>
      <includes>
        <include>*.xsd</include>
        <include>*.dtd</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xacml-policies</directory>
      <outputDirectory>/server/fedora-internal-use</outputDirectory>
      <includes>
        <include>readme.txt</include>
        <include>readme-design-choices.txt</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xacml-policies/default/default-repository-policies-approximating-2.0</directory>
      <outputDirectory>/server/fedora-internal-use/fedora-internal-use-repository-policies-approximating-2.0</outputDirectory>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/target</directory>
      <outputDirectory>/server/fedora-internal-use</outputDirectory>
      <includes>
        <include>vocabulary.txt</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xsl/security</directory>
      <outputDirectory>/server/fedora-internal-use</outputDirectory>
      <includes>
        <include>build-backend-policy.xsl</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/fcfg/server</directory>
      <outputDirectory>/server/fedora-internal-use/config</outputDirectory>
      <includes>
        <include>fedora-base.fcfg</include>
        <include>fedora-*.properties</include>
        <include>logging.properties</include>
        <include>log4j.properties</include>
        <include>*.xml</include>
      </includes>
      <excludes>
        <exclude>fedora-users.xml</exclude>
      </excludes>
    </fileSet> 
 
    <fileSet>
      <directory>../fcrepo-server/src/main/resources/fcfg/server</directory>
      <outputDirectory>/server/config</outputDirectory>
      <includes>
        <include>log4j.properties</include>
        <include>akubra-llstore.xml</include>
        <include>mime-to-extensions.xml</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/demo/demo-objects/foxml</directory>
      <outputDirectory>/client/demo/foxml</outputDirectory>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/target/client/demo</directory>
      <outputDirectory>/client/demo</outputDirectory>
    </fileSet>  

    <!-- Do these files really need to be copied to client/lib? --> 
    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xsl/batchtool</directory>
      <outputDirectory>/client/lib</outputDirectory>
      <includes>
        <include>mets-merge.xsl</include>
        <include>foxml-merge.xsl</include>
      </includes>
    </fileSet>  
    
    <fileSet>
      <directory>../fcrepo-server/src/main/resources/demo/demo-objects/batch-demo</directory>
      <outputDirectory>/client/demo/batch-demo</outputDirectory>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-server/src/main/resources/xml/batch-demo</directory>
      <outputDirectory>/client/demo/batch-demo</outputDirectory>
    </fileSet>  
    
    <!-- Client entries -->
    <fileSet>
      <directory>../resources/inc</directory>
      <outputDirectory>/client</outputDirectory>
      <includes>
        <include>truststore</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-client/fcrepo-client-admin/src/main/resources/scripts/bat/client</directory>
      <outputDirectory>/client/bin</outputDirectory>
      <filtered>true</filtered>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-client/fcrepo-client-admin/src/main/resources/scripts/sh/client</directory>
      <outputDirectory>/client/bin</outputDirectory>
      <fileMode>0755</fileMode>
      <filtered>true</filtered>
    </fileSet>  

    <fileSet>
      <directory>../fcrepo-client/fcrepo-client-admin/src/main/resources/demo/demo-soapclient</directory>
      <outputDirectory>/client/demo/soapclient</outputDirectory>
      <filtered>true</filtered>
    </fileSet>  

    <!-- Common entries -->
    <fileSet>
      <directory>../fcrepo-common/target/generated-sources/axistools/wsdl2java/fedora/server/management</directory>
      <outputDirectory>/server/fedora-internal-use/deploy</outputDirectory>
      <includes>
        <include>deploy.wsdd</include>
        <include>undeploy.wsdd</include>
      </includes>
    </fileSet>

  </fileSets>

  <!-- A few files that needed to be renamed -->
  <files>

    <file>
      <source>../fcrepo-server/src/main/resources/fcfg/server/beSecurity-secure-apim.xml</source>
      <outputDirectory>/server/config</outputDirectory>
      <destName>beSecurity.xml</destName>
    </file>

    <file>
      <source>../fcrepo-common/target/generated-sources/axistools/wsdl2java/fedora/server/access/deploy.wsdd</source>
      <outputDirectory>/server/fedora-internal-use/deploy</outputDirectory>
      <destName>deployAPI-A.wsdd</destName>
    </file>
    <file>
      <source>../fcrepo-common/target/generated-sources/axistools/wsdl2java/fedora/server/access/undeploy.wsdd</source>
      <outputDirectory>/server/fedora-internal-use/deploy</outputDirectory>
      <destName>undeployAPI-A.wsdd</destName>
    </file>

    <file>
      <source>../fcrepo-server/src/main/resources/xml/client-log4j.xml</source>
      <outputDirectory>/client</outputDirectory>
      <destName>log4j.xml</destName>
    </file>  

  </files>

  <dependencySets>
  
    <dependencySet>
      <useProjectArtifact>false</useProjectArtifact>
      <includes>
      
        <!-- <include>org.duraspace.fedora:fedora-client-admin</include> -->
        <include>org.fcrepo:fcrepo-common</include>
        <include>org.fcrepo:fcrepo-server</include>

        <!-- 
          Note: The include statement below needs catch properly defined
                (i.e. maven-central) dependencies or they will not be
                included in the assembly.
         -->
        <include>batik:*</include>
        <include>commons-codec:commons-codec:jar:1.3</include>
        <include>commons-discovery:commons-discovery:jar:0.2</include>
        <include>commons-httpclient:commons-httpclient:jar:3.1</include>
        <include>commons-logging:commons-logging:jar:1.0.4</include>
        <include>commons-pool:commons-pool:jar:1.2</include>
        <include>gnu.getopt:java-getopt:jar:1.0.13</include>
        <include>javax.activation:activation:jar:1.1.1</include>
        <include>javax.mail:mail:jar:1.4.1</include>
        <include>javax.xml:jaxrpc-api:jar:1.1</include>
        <include>com.sun.woodstock.dependlibs:jhbasic:jar:2.0</include>
        <include>javax.xml.soap:saaj-api:jar:1.3</include>
        <include>log4j:log4j:jar:1.2.15</include>
        <include>org.fcrepo:axis:jar:1.3-PATCHED</include>
        <include>org.fcrepo:jai_codec:jar:1.1.2_01</include>        
        <include>org.fcrepo:jai_core:jar:1.1.2_01</include>
        <include>org.fcrepo:mulgara-core:jar:2.1.1</include>
        <include>org.fcrepo:openrdf-sesame-onejar:jar:2.2.1</include>
        <include>org.fcrepo:saxon:jar:9.0</include>
        <include>org.fcrepo:sunxacml:jar:1.2-PATCHED</include>
        <include>org.fcrepo:trippi-core:jar:1.4.1</include>
        <include>org.slf4j:slf4j-api:jar:1.5.2</include>
        <include>org.slf4j:slf4j-log4j12:jar:1.5.2</include>
        <include>wsdl4j:wsdl4j:jar:1.5.1</include>
        <include>xerces:xercesImpl:jar:2.6.2</include>
        <include>xmlpull:xmlpull:jar:1.1.3.4a</include>
        <include>xpp3:xpp3_min:jar:1.1.3.4.O</include>
                        
      </includes>
      <!--
      <excludes>
        <exclude>org.duraspace.fedora:fedora-client-admin:jar</exclude>
      </excludes>
      -->
      <outputDirectory>/client/lib</outputDirectory>
    </dependencySet>

    <dependencySet>
      <useProjectArtifact>false</useProjectArtifact>
      <includes>
        <include>org.fcrepo:fcrepo-client-admin:jar:${project.version}</include>
      </includes>
      <outputDirectory>/client</outputDirectory>
    </dependencySet>

    <dependencySet>
      <useProjectArtifact>false</useProjectArtifact>
      <includes>

        <include>org.fcrepo:fcrepo-common</include>
        <include>org.fcrepo:fcrepo-server</include>

        <!-- 
          Note: The include statement below will need to be expanded to
                catch properly defined (i.e. maven-central) dependencies.
         -->
        <include>batik:*</include>
        <include>commons-codec:commons-codec:jar:1.3</include>
        <include>commons-discovery:commons-discovery:jar:0.2</include>
        <include>commons-httpclient:commons-httpclient:jar:3.1</include>
        <include>commons-logging:commons-logging:jar:1.0.4</include>
        <include>commons-pool:commons-pool:jar:1.2</include>
        <include>gnu.getopt:java-getopt:jar:1.0.13</include>
        <include>javax.activation:activation:jar:1.1.1</include>
        <include>javax.mail:mail:jar:1.4.1</include>
        <include>javax.xml:jaxrpc-api:jar:1.1</include>
        <include>com.sun.woodstock.dependlibs:jhbasic:jar:2.0</include>
        <include>javax.xml.soap:saaj-api:jar:1.3</include>
        <include>log4j:log4j:jar:1.2.15</include>
        <include>org.fcrepo:axis:jar:1.3-PATCHED</include>
        <include>org.fcrepo:jai_codec:jar:1.1.2_01</include>        
        <include>org.fcrepo:jai_core:jar:1.1.2_01</include>
        <include>org.fcrepo:mulgara-core:jar:2.1.1</include>
        <include>org.fcrepo:openrdf-sesame-onejar:jar:2.2.1</include>
        <include>org.fcrepo:saxon:jar:9.0</include>
        <include>org.fcrepo:sunxacml:jar:1.2-PATCHED</include>
        <include>org.fcrepo:trippi-core:jar:1.4.1</include>
        <include>org.slf4j:slf4j-api:jar:1.5.2</include>
        <include>org.slf4j:slf4j-log4j12:jar:1.5.2</include>
        <include>wsdl4j:wsdl4j:jar:1.5.1</include>
        <include>xerces:xercesImpl:jar:2.6.2</include>
        <!--
        <include>xml-apis:*</include>
        -->
                        
      </includes>
      <outputDirectory>/client/lib</outputDirectory>
    </dependencySet>

    <dependencySet>
      <useProjectArtifact>false</useProjectArtifact>
      <unpack>true</unpack>
      <includes>
        <include>org.fcrepo:fcrepo-client-messaging-${project.version}:zip:*</include>
      </includes>
      <outputDirectory>/client/fedora-client-messaging</outputDirectory>
    </dependencySet>

  </dependencySets>

</assembly>
