<assembly>
  <id>fedora-installer</id>
  <formats>
    <format>jar</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>

  <fileSets>
  
    <!-- Server entries -->
    <fileSet>
      <directory>../server/src/main/resources/properties</directory>
      <outputDirectory>/resources</outputDirectory>
      <includes>
        <include>install.properties</include>
      </includes>
    </fileSet>  

    <fileSet>
      <directory>../server/src/main/resources/dbspec/server/fedora/server/storage/resources</directory>
      <outputDirectory>/resources</outputDirectory>
      <includes>
        <include>DefaultDOManager.dbspec</include>
      </includes>
    </fileSet>  

    <!-- Top-level entries -->
    <fileSet>
      <directory>../resources/inc</directory>
      <outputDirectory>/resources</outputDirectory>
      <includes>
        <include>apache-tomcat-5.5.26.zip</include>
        <include>keystore</include>
      </includes>
    </fileSet>  

  </fileSets>

  <dependencySets>
    
    <!-- Note: The version names of the libraries are hard coded and should likely be refactored. -->
    <dependencySet>
      <includes>

        <include>org.apache.derby:derbyclient:jar:10.4.2.0</include>
        <include>org.apache.derby:derby:jar:10.4.2.0</include>
        <include>org.fedorarepo:mulgara-core:jar:2.1.1</include>
        <include>mckoi:mckoi:jar:1.0.2</include>
        <include>mysql:mysql-connector-java:jar:5.1.6</include>
        <include>postgresql:postgresql:jar:8.3-603.jdbc3</include>

      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <outputDirectory>/resources</outputDirectory>
      <!-- 
        Note: Output file is hard-coded here because it is also in java files.
              May want to consider refactoring both.
        -->
    </dependencySet>
    
    <!-- Note: The version names of the libraries are hard coded and should likely be refactored. -->
    <dependencySet>
      <includes>
      
        <include>org.duraspace.fedora:fop:war</include>
        <include>org.duraspace.fedora:saxon:war</include>
        <include>org.duraspace.fedora:imagemanip:war</include>
        
      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <outputDirectory>/resources</outputDirectory>
      <!-- 
        Note: Output file is hard-coded here because it is also in java files.
              May want to consider refactoring both.
        -->
      <outputFileNameMapping>${artifact.artifactId}.${artifact.extension}</outputFileNameMapping>
    </dependencySet>

    <dependencySet>
      <includes>
        <include>org.duraspace.fedora:democontent:war</include>
      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <!-- 
        Note: Output file is hard-coded here because it is also in java files.
              May want to consider refactoring both.
        -->
      <outputDirectory>/resources</outputDirectory>
      <outputFileNameMapping>fedora-demo.war</outputFileNameMapping>
    </dependencySet>

   <dependencySet>
      <includes>
        <include>org.duraspace.fedora:fedora-webapp:war</include>
      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <!-- 
        Note: Output file is hard-coded here because it is also in java files.
              May want to consider refactoring both.
        -->
      <outputDirectory>/resources</outputDirectory>
      <outputFileNameMapping>fedora.war</outputFileNameMapping>
    </dependencySet>

   <dependencySet>
      <includes>
        <include>org.duraspace.fedora:installer:zip*</include>
      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <outputDirectory>/resources</outputDirectory>
      <!-- 
        Note: Output file is hard-coded here because it is also in java files.
              May want to consider refactoring both.
        -->
      <useProjectAttachments>true</useProjectAttachments>
      <outputFileNameMapping>fedorahome.zip</outputFileNameMapping>
    </dependencySet>

    <dependencySet>
      <includes>
        <include>org.duraspace.fedora:common</include>

        <!-- 
          Note: The include statement below will need to be expanded to
                catch properly defined (i.e. maven-central) dependencies.
                See installer/pom.xml for exact dependency list.
         -->
        <include>commons-beanutils:commons-beanutils:jar:1.6</include>
        <include>commons-betwixt:commons-betwixt:jar:0.7</include>
        <include>commons-collections:commons-collections:jar:3.1</include>
        <include>commons-digester:commons-digester:jar:1.7</include>
        <include>commons-logging:commons-logging:jar:1.0.4</include>
        <include>dom4j:dom4j:jar:1.6.1</include>
        <include>org.fedorarepo:mulgara-core:jar:2.1.1</include>
        <include>org.fedorarepo:openrdf-sesame-onejar:jar:2.2.1</include>
        <include>jaxen:jaxen:jar:1.1.1</include>                        
        <include>log4j:log4j:jar:1.2.15</include>

      </includes>
      <excludes>
        <!-- <exclude>org.fedorarepo:one-jar-boot:jar:0.96</exclude> -->
      </excludes>
      <useProjectArtifact>false</useProjectArtifact>
      <outputDirectory>/lib</outputDirectory>
    </dependencySet>

    <dependencySet>
      <includes>
        <include>org.duraspace.fedora:server:jar:utilities-main:*</include>
      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <outputDirectory>/main</outputDirectory>
      <!-- 
        Note: Output file is hard-coded here because it is also in java files.
              May want to consider refactoring both.
        -->
      <outputFileNameMapping>main.jar</outputFileNameMapping>
    </dependencySet>

    <dependencySet>
      <includes>
        <include>org.fedorarepo:one-jar-boot:jar:0.96</include>
      </includes>
      <useProjectArtifact>false</useProjectArtifact>
      <unpack>true</unpack>
      <outputDirectory>/</outputDirectory>
    </dependencySet>

  </dependencySets>
  
</assembly>
