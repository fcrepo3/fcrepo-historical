<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Fedora&#153; SOAP Client Documentation</title></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
		<div class="article"><div class="titlepage"><div><h1 class="title"><a name="d0e2"></a>
			<span class="inlinemediaobject"><img src="../../../images/fedora_logo108x150.jpg"></span>
		</h1></div>
    <div> 
      <h1 class="title"><a name="d0e2"></a> Fedora&#153; API-A Sample SOAP Client</h1>
    </div>
			<div><h3 class="subtitle"><i>Software Release 2.0</i></h3></div>
    <div> 
      <h3 class="corpauthor"> Fedora&#153; Development Team</h3>
    </div>
			<div>
      <p class="copyright">Copyright &copy; 2002-2005 The Rector and Visitors 
        of The University of Virginia and Cornell University</p>
    </div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><a href="#d0e48">Introduction</a></dt><dt><a href="#d0e267">Configuration</a></dt><dt><a href="#d0e297">Examples</a></dt></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="d0e48"></a>Introduction</h2></div></div><p>The Fedora API-A interface is implemented as a SOAP service that consists of the following methods:</p><blockquote class="blockquote"><div class="itemizedlist"><ul type="disc"><li><p>GetBehaviorDefinitions - gets list of Behavior Defintions.</p></li><li><p>GetBehaviorMethods - gets list of Behavior Methods.</p></li><li><p>GetBehaviorMethodsXML - gets Behavior Methods as XML.</p></li><li><p>GetDissemination - gets a dissemination result.</p></li><li><p>GetObjectmethods - gets a list of all Behavior Methods of an object.</p></li><li><p>GetObjectProfile - gets object profile.</p></li><li><p>DescribeRepository - gets information about the repository, including version.</p></li><li><p>FindObjects - gets the requested ObjectFields on all objects in the
                repository matching the given criteria.</p></li><li><p>ResumeFindObjects - gets the next list of results from a truncated
                findObjects response.</p></li><li><p>GetObjectHistory - gets the change history of an object consisting of a list of timestamps indicating when object components were created or modified.</p></li></ul></div></blockquote><p>For more information on the method definitions, refer to the API descriptions located at <a href="http://www.fedora.info/definitions/1/0/api/" target="_top">http://www.fedora.info/definitions/1/0/api/</a> . </p><p>The Fedora API-A sample SOAP client is an example of a java servlet-based client that provides a front end to the Fedora Access API-A SOAP service. The sample client is designed to provide a <span class="emphasis"><em>browser centric</em></span> view of the Fedora Access interface. Return types from the Fedora Access SOAP service are translated into a form suitable for viewing with a web browser; i.e., MIME-typed streams. Applications that can readily handle SOAP requests and responses would most likely communicate directly with the Fedora Access SOAP service rather than use a java servlet as an intermediary. <span class="emphasis"><em>This servlet is provided as an example of how to construct a client that uses the Fedora Access API via SOAP and currently does not implement all methods found in API-A. As noted below, the sample Soap Client does not provide implementations for the methods FindObjects and ResumeFindObjects.</em></span>
		</p><p>
			<span class="bold"><b>Client Syntax</b></span>
		</p><p>Input parameters for the servlet include:</p><div class="itemizedlist"><ul type="disc"><li><p>
					<span class="bold"><b>action_</b></span> - name of Fedora service which must be one of the following:</p><div class="itemizedlist"><ul type="round"><li><p>
							<span class="emphasis"><em>GetBehaviorDefinitions</em></span> - gets list of Behavior Defintions</p><div class="itemizedlist"><ul type="square"><li><p>requires PID_</p></li></ul></div></li><li><p>
							<span class="emphasis"><em>GetBehaviorMethods</em></span> - gets list of Behavior Methods </p><div class="itemizedlist"><ul type="square"><li><p>requires PID_</p></li><li><p>requires bDefPID_</p></li></ul></div></li><li><p>
							<span class="emphasis"><em>GetBehaviorMethodsXML</em></span> - gets WSDL-defined Behavior Methods definitions as XML</p><div class="itemizedlist"><ul type="square"><li><p>requires PID_</p></li><li><p>requires bDefPID_</p></li></ul></div></li><li><p>
							<span class="emphasis"><em>GetDissemination</em></span> - gets a dissemination result</p><div class="itemizedlist"><ul type="square"><li><p>requires PID_</p></li><li><p>requires bDefPID_</p></li><li><p>requires methodName_</p></li></ul></div></li><li><p>
							<span class="emphasis"><em>GetObjectMethods</em></span> - gets a list of all Behavior Methods of an object.</p><div class="itemizedlist"><ul type="square"><li><p>requires PID_</p></li></ul></div></li><li><p>
							<span class="emphasis"><em>GetObjectProfile</em></span> - gets object profile.</p><div class="itemizedlist"><ul type="square"><li><p>requires PID_</p></li></ul></div></li><li><p>
							<span class="emphasis"><em>DescribeRepository</em></span> - gets description of the repository.</p><div class="itemizedlist"><ul type="square"><li><p>no parameters required</p></li></ul></div></li><li><p>
							<span class="emphasis"><em>FindObjects</em></span> - gets the requested ObjectFields on all objects in the
                repository matching the given criteria. <span class="bold"><b>
								<span class="emphasis"><em>(NOT CURRENTLY IMPLEMENTED)</em></span>
							</b></span>
						</p></li><li><p>
							<span class="emphasis"><em>ResumeFindObjects</em></span> - gets the next list of results from a truncated
                findObjects response. <span class="bold"><b>
								<span class="emphasis"><em>(NOT CURRENTLY IMPLEMENTED)</em></span>
							</b></span>
						</p></li><li><p>
							<span class="emphasis"><em>GetObjectHistory</em></span> - gets object change history.</p><div class="itemizedlist"><ul type="square"><li><p>requires PID_</p></li></ul></div></li></ul></div></li><li><p>
					<span class="bold"><b>PID_</b></span> - persistent identifier of the digital object</p></li><li><p>
					<span class="bold"><b>bDefPID_</b></span> - persistent identifier of the Behavior Definiton object</p></li><li><p>
					<span class="bold"><b>methodName_</b></span> - name of the method</p></li><li><p>
					<span class="bold"><b>asOfDateTime_</b></span> - versioning datetime stamp (optional). Proper syntax is YYYY-MM-DDTHH:MM:SS where HH is 24-hour clock.</p></li><li><p>
					<span class="bold"><b>xml_</b></span> - boolean switch used in conjunction with GetBehaviorDefinitions, GetBehaviorMethods, GetObjectMethods, GetObjectProfile and DescribeRepository methods that determines whether output is formatted as XML or as HTML; value of "true" indicates that the results are to be returned as XML; value of false or omission indicates display in HTML table format. (optional)</p></li><li><p>
					<span class="bold"><b>userParms</b></span> - behavior methods may require or provide optional parameters that may be input as arguments to a behavior method; these method parameters are entered as name/value pairs like the other serlvet parameters.(optional)</p></li></ul></div><p>Note that all servlet parameter names that are implementation specific end with the underscore character ("_"). This is done to avoid possible name clashes with user-supplied method parameter names. As a general rule, user-supplied parameters should never contain names that end with the underscore character to prevent possible name conflicts. </p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="d0e267"></a>Configuration</h2></div></div><p>The sample client can be run as an integral part of the Fedora server or as a standalone client on a different machine or server. If running outside the Fedora server, its only requirements are a servlet engine using Java Servlet API 2.1 or higher, the endpoint of a functional Fedora Server, and the servlet path mapping used to access the soap client. The endpoint and servlet path info are configured in the soapclient.properties file that is located in the WEB-INF directory of the soapclient webapp module in the Fedora distribution directory tree. The properties file specifies three variables:</p><div class="itemizedlist"><ul type="disc"><li><p>
					<span class="bold"><b>fedoraEndpoint</b></span> - the URL of the Fedora API-A SOAP service; default is "http://localhost:8080/fedora/access/soap"</p></li><li><p>
					<span class="bold"><b>soapClientServletPath</b></span> - the servlet path used to access the soapclient; default is "/soapclient/apia"</p></li><li><p>
					<span class="bold"><b>soapClientMethodParmResolverServletPath</b></span> - the servlet mapping used to access the MethodParmResolverServlet which is a utility servlet of the soap client; default is "/soapclient/getAccessParmResolver"</p></li></ul></div><p>The web.xml file for the soap client webapp uses these default settings. If the webapp is ported to another servlet engine and any of the serlvet mappings change, the web.xml and the soapclient.properties file must both be updated accordingly. The servlets will dynamically get the values in the soapclient.properties file so no changes should be needed in the source code.</p><p>When the Fedora server is built, it will automatically create the soapclient webapp module and place it in the Fedora distribution directory. The generated SOAP type libraries that are bundled with the client are tied to the WSDL type definitions defined for Fedora API-A. Any changes made to the WSDL for API-A will require rebuilding of the Fedora server and the soap client webapp module.</p><p>Note that if you change the host name or port number on which the Fedora server is running, you must also update the value for the fedoraEndpoint parameter in the soapclient.properties file to reflect the new values. Otherwise, the soap client will be unable to connect to the Fedora server running under the new host name or port number. If you are running the soap client bundled together with the Fedora server, you need to stop the Fedora server, update the soapclient.properties file, and then restart the Fedora server so the new property values will be recognized by the soapclient webapp.</p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="d0e297"></a>Examples</h2></div></div><div class="orderedlist"><ol type="1"><li><p>Get the BehaviorDefinitions for a data object with a PID of demo:5</p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=GetBehaviorDefinitions&amp;PID_=demo:5</p></blockquote></li><li><p>Get the BehaviorMethods for a data object with a PID of demo:5 and associated behavior definition object with a PID of demo:1</p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=GetBehaviorMethods&amp;PID_=demo:5&amp;bDefPID_=demo:1</p></blockquote></li><li><p>Get the BehaviorMethodsXML for a data object with a PID of demo:5 and associated behavior definition object with a PID of demo:1</p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=GetBehaviorMethodsXML&amp;PID_=demo:5&amp;bDefPID_=demo:1</p></blockquote></li><li><p>Get the Dissemination for a data object with a PID of demo:5 and associated behavior definition object with a PID of demo:1 and methodName of getThumbnail</p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=GetDissemination&amp;PID_=demo:5&amp;bDefPID_=demo:1&amp;methodName_=getThumbnail </p></blockquote></li><li><p>Get the ObjectMethods for a data object with a PID of demo:5: </p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=GetObjectMethods&amp;PID_=demo:5</p></blockquote></li><li><p>Get the ObjectProfile for a data object with a PID of demo:5:</p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=GetObjectProfile&amp;PID_=demo:5</p></blockquote></li><li><p>Get information about the repository:</p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=DescribeRepository</p></blockquote></li><li><p>Get the ObjectHistory for a data object with a PID of demo:5:</p><blockquote class="blockquote"><p>http://localhost:8080/soapclient/apia?action_=GetObjectHistory&amp;PID_=demo:5</p></blockquote></li></ol></div></div></div></body></html>