<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
  <title>Fedora Installation and Configuration Guide</title>
  <link rel="stylesheet" type="text/css" href="../docstyle.css" />
</head>

<body>
  <div id="header">
    <a href="../index.html" id="logo"></a>

    <div id="title">
      <h1>Fedora Installation and Configuration Guide</h1>

      <h2>Fedora Release 2.2</h2>
    </div>
  </div>


<div id="toc">
    <h2>Table of Contents</h2>
    <div id="tocbox">
        <ol>
            <li><a href="#intro">Introduction</a>
            	<ol>
            		<li><a href="#intro.prereq">Prerequisites</a></li>
            		<li><a href="#intro.download">Download Fedora</a></li>
            	</ol>
      		<li><a href="#installer">Installation</a>
      			<ol>
      				<li><a href="#installer.quick">Quick Install</a></li>
      				<li><a href="#installer.custom">Custom Install</a></li>
      				<li><a href="#installer.source">Source Install</a></li>
      			</ol>
      		</li>
       		<li><a href="#running">Running the Server</a>
       			<ol>
      				<li><a href="#running.demo">Demo Objects</a></li>
      				<li><a href="#running.logs">Server Logs</a></li>
      			</ol>
       		</li>
            <li><a href="#db">Database</a>
            	<ol>
            		<li>MySQL</li>
            		<li>Oracle</li>
            		<li>Other</li>
           		</ol>
            </li>
            <li><a href="#config">Configuring the Fedora Server</a></li>
            <li><a href="#references">Where from Here?</a></li>
        </ol>
    </div>
</div>

<div class="sect">
<h2><a name="intro">1. Introduction</a></h2>
<p>This is the installation guide for Fedora. It includes instructions for 
installing the server and client distributions, as well as instructions for 
installing and compiling the complete source code distribution.</p>

    <div class="subsect">
		<h3><a name="intro.prereq">A. Install Prerequisites</a></h3>
    	<p>Required:</p>
        <ul>
        	<li>Java SE Development Kit (JDK) 5.0. <br /> 
        	Whether installing a binary or source distribution, JDK 5.0 or above
        	is required. The JDK should be installed on
            the machine you intend to use as the Fedora server. The JDK is 
            available from <a href="http://java.sun.com/">http://java.sun.com/</a>.</li>
        </ul>

		<p>Optional:</p>
        <ul>
			<li>Database<br /> 
			The Fedora server is backed in part by a relational database. 
			For ease of installation, the Fedora installer includes and can
			configure an embedded instance of the 
			<a href="http://mckoi.com/database/">McKoi SQL Database 1.0.3</a>. 
			Fedora also supports <a href="http://www.mysql.com/">MySQL</a>, 
			<a href="http://www.oracle.com/">Oracle 9</a> and 
			<a href="http://www.postgresql.org/">PostgreSQL</a>. 
			If the included McKoi database will not be used, another database 
			server must be installed, configured and running before proceeding 
			with the installation.
			To configure Fedora to use MySQL, Oracle, or PostgreSQL, please see 
			below for more instructions.</li>
            <li>Servlet Container<br />
            The Fedora installer includes Tomcat 5.0.28. Optionally, Fedora may 
            be installed into any existing servlet container that implements 
            Servlet 2.4/JSP 2.0 or higher. At this time, Fedora has chiefly 
            been tested with Tomcat 5.0.28 but users have reported running 
            Fedora successfully with Tomcat 5.5.x and Jetty.
            </li>
        </ul>
        
        <p>Additional requirements for building Fedora from source:</p>
        <ul>
        	<li>Ant 1.6.5 or later<br /> 
        	Fedora uses Ant for its build environment. Ant is available from 
        	<a href="http://ant.apache.org/">http://ant.apache.org/</a>.</li>
        </ul>
    </div>

    <div class="subsect">
		<h3><a name="intro.download">B. Download Fedora</a></h3>
		<p>The latest version of the software can always be found at
		<a href="http://www.fedora.info/download/" 
		target="_top">http://www.fedora.info/download/</a>.</p>

		<p>There are two download options: the Fedora Installer and the source 
		code distribution. Unless you wish to build Fedora from source, you 
		should select the Fedora Installer.</p>
    </div>
    
    <div class="subsect">
		<h3><a name="intro.env">C. Prepare Environment Variables</a></h3>
		<p>The following environment variables must be correctly defined:</p>
		<ul>
			<li>JAVA_HOME
				<p>This should point to the base directory of your Java 
				installation. On Windows systems, this might be C:\java.
				For UNIX derivatives, this might be something like 
				/usr/local/java-1.5.0-sun</p>
			</li>
			<li>FEDORA_HOME
				<p>This is the directory where Fedora will be installed,
				for example, C:\fedora or /usr/local/fedora.</p>
			</li>
			<li>PATH
				<p>This must include the Java and Fedora bin directories. 
				For UNIX derivatives, this will be $FEDORA_HOME/server/bin, 
				$FEDORA_HOME/client/bin and usually $JAVA_HOME/bin.
				For Windows, this will be %FEDORA_HOME%\server\bin, 
				%FEDORA_HOME%\client\bin and usually %JAVA_HOME%\bin.</p>
				<p>If you will be building from source, ant should also also be
				on your path.</p>
			</li>
		</ul>
    </div>
</div>

<div class="sect">
<h2><a name="installer">2. Installation</a></h2>
	<p>The Fedora Installer provides two installation options: quick or custom. 
	The quick install is designed to get an instance of Fedora up and running as
	quickly as possible, with a minimum of options. The quick install will 
	automatically install a servlet container and database. Neither SSL 
	support nor XACML policy enforcement is enabled by the quick install.</p>
	
	<p>The custom install, on the other hand, provides the most flexibility in 
	configuring your installation. In addition to being able to select your own 
	servlet container or database, you can also configure the host and ports 
	Fedora will be running on as well as security options including SSL and 
	XACML policy enforcement.</p>
	
	<p>To start the installer, change to the directory where you downloaded the 
	installer and enter <code>java -jar fedora-2.2-installer.jar</code> at a 
	command prompt.</p>
	
    <div class="subsect">
		<h3><a name="intro.env">A. Quick</a></h3>
		<p>blah blah</p>
	</div>
	
	<div class="subsect">
		<h3><a name="intro.env">B. Custom</a></h3>
		<p>blah blah</p>
		
		<p>SSL, database upgrade...</p>
	</div>
	
	<div class="subsect">
		<h3><a name="intro.env">C. Source</a></h3>
		<p>After unpacking the source distribution, change into the newly 
		extracted directory. To build the installer, enter 
		<code>ant installer</code>. 
		To see a list of build targets, enter <code>ant -projecthelp</code>.</p>
	</div>
</div>

<div class="sect">
<h2><a name="running">3. Running Fedora</a></h2>
	<p>If you selected the quick install option, you will find Tomcat 
	installed in FEDORA_HOME/tomcat. Start Tomcat by entering
	<code>FEDORA_HOME/tomcat/bin/startup.sh</code> 
	(or <code>FEDORA_HOME\tomcat\bin\startup.bat</code> in Windows).</p>

	<p>If you selected the custom install option, ensure that your database 
	server is running (unless you selected the embedded McKoi option) and start 
	your servlet container.</p>
	
	<div class="subsect">
		<h3><a name="running.demo">A. Demo Objects</a></h3>
		<p>blah blah</p>
		
		<p>If you have changed the values of either <span class=
          "emphasis"><em>fedoraServerHost</em></span> and <span class="emphasis"><em>fedoraServerPort</em></span>, 
	then you must run the <i><b>demo object converter utility </b></i>script to 
	change the host and/or port in the demo object ingest files.&nbsp;&nbsp; The 
	demo object conversion is only required if you are ingesting demo objects.&nbsp;&nbsp; 
	If the demo objects are already ingested into the repository, they will be 
	fine!&nbsp; The 
	demo objects are shipped with references to &quot;localhost:8080&quot; and these 
	references must reflect the new values of <span class=
          "emphasis"><em>fedoraServerHost</em></span> and <span class="emphasis">
	<em>fedoraServerPort</em></span> .&nbsp; Refer to the 
	<a href=
          "../client/cmd-line/index.html" target=
          "_top">Command-line Utilities documentation</a> for additional details 
          on running the demo object converter.</p>
    <p>If you've just got your Fedora server up and running, it's a
    good idea to check out the demonstration objects to get an idea
    of how Fedora works. See <a href="demos.html" target="_top">the
    Demo Manual</a> for complete descriptions of the demos.</p>

    <p>The demos may be ingested via the Fedora Admin GUI tool or
    from the command line. If you ingest the from the Admin GUI,
    you must be sure to ingest bdef objects first, then bmech
    objects, then regular objects.</p>

    <p>To access the Admin GUI use the command:</p>

    <p><span class="emphasis"><em>fedora-admin [hostname] [port]
    [username] [password]</em></span></p>

    <p>To ingest the demos from the command line (recommended), use
    the command:</p>

    <p><span class="emphasis"><em>fedora-ingest-demos [hostname]
    [port] [username] [password] [protocol]</em></span></p>

    <p>For additional information on the fedora-ingest-demos command,
    see the documentation for the <a href="../client/cmd-line/index.html#indemo">
    client command-line utilities</a>. Please note that 
    the demo objects must be ingested before they can be discovered 
    using the default search interface.</p>
	</div>
	
	<div class="subsect">
		<h3><a name="running.logs">B. Server Logs</a></h3>
		<p>While the server is running, it writes logs to
    	FEDORA_HOME/server/logs. These are timestamped files, written
    	in a simple XML format. You can use these logs to get more
    	extensive information about what the server is doing or to
    	diagnose problems.</p>
	</div>
</div>

<div class="sect">
<h2><a name="running">5. Database</a></h2>
	<p>Fedora is designed to be RDBMS-independent, but comes with
	a pure java database called McKoi. It has been tested and
	works with McKoi, MySQL, Oracle and PostgreSQL. If you choose to use
	any database but McKoi, we assume here that it is already
	installed.</p>

	<p>Follow the below instructions for the RDBMS of your choice
	in order to create the user and tablespace so that the Fedora
	software can use the database.</p>
	
	<div class="subsect">
		<h3><a name="intro.env">A. MySQL</a></h3>
		<p><em>Important:</em>The Fedora Installer provides the MySQL 
		Connector/J JDBC driver 5.0.4 that is compatible with MySQL v3.23.x and 
		above. If you plan to use MySQL 4.1.x, If using MySQL 4.1.x, you must 
		also specify the default character set for the Fedora database as "utf8" 
		and the default collation as "utf8_bin".</p>
	</div>
	
	<div class="subsect">
		<h3><a name="intro.env">B. Oracle</a></h3>
		<p>With Oracle, you will need to use an administrative account to 
		manually create 1) the Fedora user on the database, and 2) the 
		tablespace on which that user has complete control.</p>
		
		<p>Do to distribution license restrictions, the Fedora Installer does 
		not include the Oracle JDBC driver. Oracle JDBC drivers are available
		from <a href="http://technet.oracle.com/software/tech/java/sqlj_jdbc/content.html"
		target="_top">http://technet.oracle.com/software/tech/java/sqlj_jdbc/content.html</a>.
        The installer will prompt you for the location of the driver on your 
        filesystem.</p>
	</div>
	
	<div class="subsect">
		<h3><a name="intro.env">C. Other Databases</a></h3>
        <p>If you want to use a different database, it's an option,
        but it will take some extra work. Here's how it can be
        done:</p>
        
          <ul type="disc">
            <li>
              <p>The database needs to be JDBC-compliant and must
              support common SQL-92 syntax. The driver will need to
              be put in the server's jakarta-tomcat-5.0.28/common/lib directory
              so that Fedora picks it up, and the JDBC url will
              need to be configured appropriately in the Fedora Server 
				Configuration File.</p>
            </li>
          </ul>

        <p>Upon startup, Fedora checks the database for all
        required tables. If they don't exist, it creates them.
        Creation of tables is a much less standardized task across
        RDBMSs than regular SQL queries. Thus, you must either</p>

          <ol type="1">
            <li>
              <p>create the tables and indexes and auto-increments
              yourself in your own database (see the file:
              src/dbspec/server/fedora/server/storage/resources/DefaultDOManager.dbspec
              in the source distribution for the RDBMS-neutral
              table specifications),</p>
            </li>

            <li>
              <p>write your own subclass of
              fedora.utilities.DDLConverter for your database
              software, include it in a jar file in
              server/jakarta-tomcat-5.0.28/common/lib, and associate it with the
              JDBC driver inside the server/config/fedora.fcfg file
              (see how it's done by looking at the
              MySQLDDLConverter and McKoiDDLConverter associations
              with their respective drivers in the fedora.fcfg
              file, and the classes' implementations in the source
              distribution).</p>
            </li>
          </ol>

        <p>If you choose option #2, please tell us about it, as it
        will be useful for other users of Fedora! Option 2 is
        harder, but it will make future installations of new
        versions of Fedora (where the db schema will likely change)
        much easier for you if you plan on using that database
        later.</p>
	</div>
</div>

<div class="sect">
<h2><a name="running">6. Configuring the Fedora Server</a></h2>
	<p>Edit the Fedora Server Configuration File (fedora.fcfg) to override default settings.</p>

	<p>The Fedora server configuration file contains: (1) global parameters 
		for the Fedora server, (2) configuration parameters for each server 
		module, and configuration parameters for each persistent data store of 
		the Fedora server.&nbsp;&nbsp; The configuration file is located at FEDORA_HOME/server/config/fedora.fcfg.</p>
		<p>The configuration file has a simple schema.&nbsp; It starts
        with a server element, under which a series of parameter
        elements occur, followed by a series of module elements,
        followed by a series of datastore elements.&nbsp; The parameter elements directly following the root server
        element are used to control what are considered generic
        server functionality. Examples include the level of logging
        to do, the port on which the server should be exposed, and
        the superuser password.</p>

        <p>The module elements are used to configure specific parts
        of Fedora. For instance, the module with the role
        attribute, "fedora.server.search.FieldSearch" is used to
        configure the field-searching component of the server.
        Inside the module element, several param elements are
        included. These are specific to that module's
        implementation. Descriptions of each parameter can
        currently be found in the configuration file itself.
        Important ones will be listed below.</p>

        <p>The datastore elements are used to configure various
        databases that might be used by the system. Although the
        sample configuration file holds several, you will typically
        only need one. The datastore elements are associated with
        the modules by means of a parameter inside the associated
        module. In the sample configuration file, for example, the
        poolNames param of the
        fedora.server.storage.ConnectionPoolManager module refers
        to one of the datastore elements in its value.</p>
        
      <p>There are many other parameters you can configure with Fedora. See the 
        Fedora Server Configuration File itself (fedora.fcfg) for internal documentation on all the parameters.</p>
</div>

<div class="sect">
<h2><a name="running">7. Where From Here?</a></h2>
	
</div>

<div id="footer">
    <div id="copyright">Copyright &copy; 2007 Fedora Project</div>

    <div id="lastModified">
      Last Modified <script type="text/javascript">
      //<![CDATA[
            var cvsDate = "$Date$";
            var parts = cvsDate.split(" ");
            var modifiedDate = parts[1];
            document.write(modifiedDate);
      //]]>
      </script>
    </div>
</div>
</body>
</html>
